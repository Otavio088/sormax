{% extends "home.html" %}

{% block title %} Resultados Salvos {% endblock %}

{% block extra_css_home %}
    <link rel="stylesheet" href="/static/css/consult.css">
{% endblock %}

{% block content_home %}
<div class="content">
    <h1>Resultados Salvos</h1>

    {% if results %}
        {% for result in results %}
            <div class="result-card">
                <h3>{{ result.name }}</h3>
                <p><strong>Lucro Máximo:</strong> R$ {{ "%.2f"|format(result.profit) }}</p>
                <ul>
                    {% for product in result.products %}
                        <li>{{ product.name }} — {{ product.quantity }} un — R$ {{ "%.2f"|format(product.total_value) }}</li>
                    {% endfor %}
                </ul>
                <form method="get" action="{{ url_for('consult.view_result', result_id=result.id) }}">
                    <button type="submit" class="btn-view">Visualizar</button>
                </form>
                <form method="post" action="{{ url_for('consult.delete_result', result_id=result.id) }}" onsubmit="return confirm('Tem certeza que deseja deletar este resultado?');">
                    <button type="submit" class="delete-btn">Deletar</button>
                </form>
            </div>
        {% endfor %}
    {% else %}
        <p>Nenhum resultado salvo ainda.</p>
    {% endif %}
</div>
{% endblock %}
